---
import { getCollection } from 'astro:content'
import WorkCarouselIsland from './WorkCarouselIsland.jsx'
import typo from '../content/typography.json'

const shCfg = typo.tags.sectionHeading
const SectionTag = shCfg.tag as any
const allWork = await getCollection('work')
const featured = allWork
  .filter(w => w.data.featured)
  .sort((a, b) => a.data.sortOrder - b.data.sortOrder)
  .map(w => ({
    title: w.data.title,
    role: w.data.role,
    year: w.data.year,
    thumbnail: w.data.thumbnail,
    slug: w.id,
  }))
---

<section class="work-carousel-section" id="selected-work" aria-label="Selected work">
  <div class="work-carousel-header">
    <SectionTag class={`typo-${shCfg.role}`}>Selected Work</SectionTag>
  </div>
  <WorkCarouselIsland cards={featured} cardTitleTag={typo.tags.carouselCardTitle.tag} cardTitleRole={`typo-${typo.tags.carouselCardTitle.role}`} client:visible />
</section>

<style>
  .work-carousel-section {
    padding: var(--section-padding) 0;
    overflow: hidden;
  }

  .work-carousel-header {
    max-width: var(--container-content);
    margin: 0 auto;
    padding: 0 var(--page-padding);
    margin-bottom: var(--space-4);
  }
</style>
