---
import { Icon } from 'astro-icon/components'
const year = new Date().getFullYear()
---

<footer class="footer">
  <div class="footer-container">
    <!-- Name bar -->
    <div class="footer-bar">
      <div class="footer-bar-text">
        <p class="footer-wordmark-text">Sam Stringer-Hye</p>
      </div>
      <nav class="footer-bar-icons" aria-label="Social links">
        <a href="mailto:sam@samstringerhye.com" class="footer-icon-cell" aria-label="Email">
          <Icon name="material-symbols-light:mail-outline-sharp" />
        </a>
        <a href="https://linkedin.com/in/samstringerhye" target="_blank" rel="noopener noreferrer" class="footer-icon-cell" aria-label="LinkedIn">
          <Icon name="simple-icons:linkedin" />
        </a>
      </nav>
    </div>

    <!-- Bottom bar -->
    <div class="footer-bottom">
      <p class="footer-copyright typo-ui-nav-section">&copy; {year}</p>
      <a href="/colophon" class="footer-colophon typo-ui-nav-section">Colophon</a>
    </div>
  </div>
</footer>

<style>
  .footer {
    margin-top: 0;
    border-top: var(--border-width-1) solid var(--color-text-primary);
  }

  .footer-container {
    margin-inline: var(--page-margin);
  }

  /* ── Top utility bar ── */
  .footer-bar {
    display: flex;
    height: var(--nav-height);
    border-bottom: var(--border-width-1) solid var(--color-text-primary);
  }

  .footer-bar-text {
    flex: 1;
    display: flex;
    align-items: center;
    padding-inline: var(--content-inset);
  }

  .footer-bar-icons {
    display: flex;
    flex-shrink: 0;
    height: 100%;
  }

  .footer-icon-cell {
    display: flex;
    align-items: center;
    justify-content: center;
    width: var(--nav-height);
    height: 100%;
    border-left: var(--border-width-1) solid var(--color-text-primary);
    color: var(--color-text-primary);
    transition: background-color 250ms ease;
  }

  .footer-icon-cell svg {
    width: 30%;
    height: 30%;
    transition: transform 250ms cubic-bezier(0.34, 1.56, 0.64, 1);
  }

  .footer-icon-cell:hover svg {
    transform: scale(1.2) rotate(-5deg);
    transition: transform 490ms cubic-bezier(0.5, 0, 0, 1);
  }

  .footer-wordmark-text {
    font-family: var(--font-serif);
    font-weight: var(--font-weight-regular);
    font-size: var(--wordmark-size);
    line-height: 1;
    letter-spacing: var(--tracking-tighter);
    color: var(--color-text-primary);
    white-space: nowrap;
  }

  /* ── Bottom bar ── */
  .footer-bottom {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: calc(var(--page-margin) * 2);
    padding: var(--space-3) var(--content-inset);
  }

  .footer-colophon {
    transition: opacity var(--transition-fast) ease;
  }

  .footer-colophon:hover {
    opacity: var(--opacity-50);
  }

  /* ── Mobile ── */
  @media (--2x) {
.footer-wordmark-text {
      font-size: var(--wordmark-size-mobile);
    }
  }
</style>

<script>
  import { animations, cmyRgba } from '../data/tokens'

  const CMY_COLORS = cmyRgba(animations.timeline.hover.saveCmyOpacity)
  let colorIndex = 0

  function initFooterHover() {
    const cells = document.querySelectorAll<HTMLAnchorElement>('.footer-icon-cell')
    cells.forEach((cell) => {
      cell.addEventListener('mouseenter', () => {
        cell.style.backgroundColor = CMY_COLORS[colorIndex++ % CMY_COLORS.length]
      })
      cell.addEventListener('mouseleave', () => {
        cell.style.backgroundColor = ''
      })
    })
  }

  initFooterHover()
  document.addEventListener('astro:page-load', initFooterHover)
</script>
