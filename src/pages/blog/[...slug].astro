---
import { getCollection, render } from 'astro:content'
import BlogLayout from '../../layouts/BlogLayout.astro'

export async function getStaticPaths() {
  const allPosts = await getCollection('blog')
  return allPosts
    .filter(p => p.data.published)
    .map(entry => ({
      params: { slug: entry.id },
      props: { entry },
    }))
}

const { entry } = Astro.props
const { Content } = await render(entry)
---

<BlogLayout title={entry.data.title} description={entry.data.description} date={entry.data.date} tags={entry.data.tags}>
  <Content />
</BlogLayout>
